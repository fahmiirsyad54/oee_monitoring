{"version":3,"sources":["qr-scanner.js"],"names":["QrScanner","navigator","mediaDevices","enumerateDevices","then","devices","some","device","kind","catch","video","onDecode","canvasSize","DEFAULT_CANVAS_SIZE","$video","$canvas","document","createElement","_onDecode","_active","_paused","width","height","_sourceRect","x","y","_onCanPlay","bind","_onPlay","_onVisibilityChange","addEventListener","_qrWorker","Worker","WORKER_PATH","removeEventListener","stop","postMessage","type","Promise","resolve","window","location","protocol","console","warn","hidden","clearTimeout","_offTimeout","srcObject","play","facingMode","_getCameraStream","stream","_setVideoMirror","e","pause","setTimeout","track","getTracks","imageOrFileOrUrl","sourceRect","worker","canvas","fixedCanvasSize","alsoTryWithoutSourceRect","promise","reject","data","timeout","onMessage","onError","event","errorMessage","message","_loadImage","image","imageData","_getImageData","buffer","scanImage","red","green","blue","inversionMode","_updateSourceRect","_scanFrame","start","smallestDimension","Math","min","videoWidth","videoHeight","sourceRectSize","round","paused","ended","requestAnimationFrame","error","exact","constraintsToTry","forEach","constraint","_getMatchingCameraStream","length","getUserMedia","shift","scaleFactor","style","transform","sourceRectX","sourceRectY","sourceRectWidth","sourceRectHeight","context","getContext","alpha","imageSmoothingEnabled","drawImage","getImageData","HTMLCanvasElement","HTMLVideoElement","ImageBitmap","OffscreenCanvas","Image","_awaitImageLoad","File","URL","src","createObjectURL","revokeObjectURL","complete","naturalWidth","onLoad"],"mappings":"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","file":"qr-scanner.min.js","sourcesContent":[]}